#!/usr/bin/env node

const updateNotifier = require('update-notifier');
const program = require('commander');

const pkg = require('../package.json');

program
  .version(pkg.version);

program
  .command('play')
  .description('start a dev server')
  .option('-p, --port <port>', 'set server port', parseInt)
  .option('-h, --host <host>', 'set server host')
  .option('-r, --proxy <proxy>', 'set proxy uri')
  .action(require('./cli-play'));

program
  .command('test')
  .description('run tests')
  .usage('-- [jestOptions]')
  .action(require('./cli-test'));

program
  .command('lint')
  .description('run linter')
  .action(require('./cli-lint'));

program
  .command('flow')
  .description('run flow')
  .action(require('./cli-flow'));

program
  .command('relay')
  .description('update relay schema')
  .action(require('./cli-relay'));

program
  .parse(process.argv);

const notifier = updateNotifier({
  pkg,
  updateCheckInterval: 1000 * 60 * 60 * 24 * 7, // 1 week
});
notifier.notify();
