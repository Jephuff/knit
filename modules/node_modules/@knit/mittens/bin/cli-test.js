/* @flow weak */

const jestConfig = require('@knit/jest-config-socks');
const jest = require('jest');

module.exports = (...opts) => {
  opts.pop();
  const argv = ['--config', JSON.stringify(jestConfig()), ...opts];

  if (process.env.CI === true) {
    argv.push('--bail');
    argv.push('--coverage');
  }

  jest.run(argv);
};
