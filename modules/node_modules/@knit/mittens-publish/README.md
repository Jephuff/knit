![Publish](mittens_publish_header.png "Publish")

---

Pair of Mittens to help publish your applications.

## Install

This is a cli addon for KnitJS and expects the [knit-cli](https://github.com/knitjs/knit/tree/master/modules/node_modules/%40knit/knit) to be installed.

```
yarn add @knit/mittens-publish
```

## Commands

We will assume that knit has been [installed](https://github.com/knitjs/knit/tree/master/modules/node_modules/%40knit/knit#local) locally for these examples. If knit is installed globally replace  with `yarn knit --` with `knit`.

#### version

```
❯ yarn knit -- pb version <version>
Usage: version [options] <version>

version updated modules

Options:

  -h, --help       output usage information
  -f, --force-all  version all modules. (will fail if version already released)
```

This will bump the version of all updated modules and tag and commit to git.

#### build

```
❯ yarn knit -- pb build
Usage: build [options]

build updated modules

Options:

  -h, --help       output usage information
  -f, --force-all  build all modules
```

The updated packages are built against `commonjs`, `es6 modules` and `umd` targets.

#### knit

```
❯ yarn knit -- pb knit
Usage: knit [options]

knit updated modules

Options:

  -h, --help       output usage information
  -f, --force-all  knit all modules. (will fail if version already published)
```

The updated dependencies are knitted together - all required dependencies and meta data are added to the module `package.json`s.

#### publish

```
❯ yarn knit -- pb publish
Usage: publish [options]

publish updated modules

Options:

  -h, --help       output usage information
  -f, --force-all  publish all modules. (will fail if version already published)
```

This command does not commit anything to git and must be done on a tagged commit. All updated modules are publish to the npm registry and can be used by `require`, `import`, modern tree-shaking bundlers like `webpack` and `rollup` using `jsnext:main` and as script tags thanks to https://unpkg.com.

#### release

```
❯ yarn knit -- pb release  <version>
Usage: knit [options]

release updated modules

Options:

  -h, --help       output usage information
  -f, --force-all  release all modules. (will fail if version already published)
```

This command will run all updated modules through the full release process: `version->build->knit->publish` and then push to git. If you would like to modify this work flow each step has been broken out into its own command for you to mix and match as needed.
