/* @flow weak */

const execa = require('execa');

const tasks = [
  {
    title: 'check commit is tagged',
    task: ctx => execa.stdout('git', ['describe', '--exact-match', 'HEAD']).then(tag =>
       ctx.tag = tag
    ).catch(err => {
      throw {
        cmd: 'commit is not tagged',
        stdout: 'release this commit or checkout a tag before publishing',
      };
    }),
  },
];

module.exports = tasks;
