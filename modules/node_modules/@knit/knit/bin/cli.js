#!/usr/bin/env node

const updateNotifier = require('update-notifier');
const program = require('yargs');
const readPkgUp = require('read-pkg-up');

const pkg = readPkgUp.sync({ cwd: __dirname }).pkg;

program
  .version(pkg.version)
  .command('list [modules...]', 'list modules and their dependencies',
  (yargs) => (
    yargs
      .options({
        d: {
          alias: 'dependencies',
          describe: 'show dependencies for each module',
          type: 'boolean',
        },
        u: {
          alias: 'updated',
          describe: 'limit search to updated modules',
          type: 'boolean',
        },
      })
  ), require('./cli-list'))
  .command('validate', 'validate modules for release', require('./cli-validate'))
  .command(require('./mittens/develop'))
  .command(require('./mittens/publish'));

program
  .demand(1)
  .help()
  .argv;

const notifier = updateNotifier({
  pkg,
  updateCheckInterval: 1000 * 60 * 60 * 24 * 7, // 1 week
});
notifier.notify();
