#!/usr/bin/env node

const updateNotifier = require('update-notifier');
const program = require('commander');

const pkg = require('../package.json');

program
  .version(pkg.version);

program
  .command('ls [modules...]')
  .description('list modules and their dependencies')
  .action(require('./cli-ls'));

program
  .command('updated')
  .description('list updated modules')
  .action(require('./cli-updated'));

program
  .command('validate')
  .description('validate modules for release')
  .action(require('./cli-validate'));

program
  .command('release <version>')
  .description('release updated modules')
  .option('-f, --force-all', 'release all modules. (will fail if version already released)')
  .action(require('./cli-release'));

program
  .command('publish')
  .description('publish updated modules')
  .option('-f, --force-all', 'publish all modules. (will fail if version already published)')
  .action(require('./cli-publish'));

program
  .parse(process.argv);

const notifier = updateNotifier({
  pkg,
  updateCheckInterval: 1000 * 60 * 60 * 24 * 7, // 1 week
});
notifier.notify();
